<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
    google.charts.load('current', {packages: ['line']});
    google.charts.setOnLoadCallback(drawChart);

    function drawChart() {
        // Loading data
        var jsonData = $.ajax({
            url: "/api/water/usage/weekly",
            dataType: "json",
            async: false
        }).responseText;

        // Create our data table
        var data = new google.visualization.DataTable(jsonData);
        // Chart options
        var options = {
            width: 800, 
            height: 400,
            title: 'Consommation des 7 derniers jours',
            subtitle: 'En litre/jour'
        };

        // Draw the chart
        var chart = new google.charts.Line(document.getElementById('myPieChart'));
        chart.draw(data, google.charts.Line.convertOptions(options));
    }
</script>
